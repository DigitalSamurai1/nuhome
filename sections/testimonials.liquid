{% comment %}
  Enhanced Testimonials section for N√ºHome theme
  Features: Winter-themed customer testimonials with social proof, verified badges, and trust signals
{% endcomment %}

<section class="testimonials" data-section-id="{{ section.id }}" data-section-type="testimonials">
  <!-- Background Decorations -->
  <div class="testimonials__background">
    <div class="testimonials__snowflakes">
      <div class="testimonials__snowflake">‚ùÑÔ∏è</div>
      <div class="testimonials__snowflake">‚ú®</div>
      <div class="testimonials__snowflake">‚ùÑÔ∏è</div>
    </div>
  </div>

  <div class="container">
    <!-- Header Section -->
    <div class="testimonials__header text-center">
      {% if section.settings.heading != blank %}
        <h2 class="testimonials__title">
          <span class="testimonials__title-text">{{ section.settings.heading }}</span>
          <span class="testimonials__title-decoration">‚ùÑÔ∏è‚ú®‚ùÑÔ∏è</span>
        </h2>
      {% endif %}
      
      {% if section.settings.subheading != blank %}
        <p class="testimonials__subtitle">{{ section.settings.subheading }}</p>
      {% endif %}

      <!-- Trust Indicators -->
      <div class="testimonials__trust-indicators">
        <div class="testimonials__trust-indicator">
          <span class="testimonials__trust-number">50,000+</span>
          <span class="testimonials__trust-label">Happy Customers</span>
        </div>
        <div class="testimonials__trust-indicator">
          <span class="testimonials__trust-number">4.8/5</span>
          <span class="testimonials__trust-label">Average Rating</span>
        </div>
        <div class="testimonials__trust-indicator">
          <span class="testimonials__trust-number">99.8%</span>
          <span class="testimonials__trust-label">Satisfaction Rate</span>
        </div>
      </div>
    </div>

    {% if section.blocks.size > 0 %}
      <div class="testimonials__slider" data-testimonials-slider>
        <div class="testimonials__grid">
          {% for block in section.blocks %}
            {% case block.type %}
              {% when 'testimonial' %}
                <div class="testimonial" data-testimonial {{ block.shopify_attributes }}>
                  <!-- Verified Badge -->
                  <div class="testimonial__verified-badge">
                    <span class="testimonial__verified-icon">‚úì</span>
                    <span class="testimonial__verified-text">Verified Purchase</span>
                  </div>

                  <div class="testimonial__content">
                    <!-- Rating -->
                    {% if block.settings.rating > 0 %}
                      <div class="testimonial__rating">
                        {% for i in (1..5) %}
                          {% if i <= block.settings.rating %}
                            <span class="star star--filled">‚≠ê</span>
                          {% else %}
                            <span class="star star--empty">‚òÜ</span>
                          {% endif %}
                        {% endfor %}
                        <span class="testimonial__rating-text">({{ block.settings.rating }}/5)</span>
                      </div>
                    {% endif %}

                    <!-- Product Context -->
                    {% if block.settings.product_name != blank %}
                      <div class="testimonial__product">
                        <span class="testimonial__product-icon">üßä</span>
                        <span class="testimonial__product-name">{{ block.settings.product_name }}</span>
                      </div>
                    {% endif %}

                    <!-- Testimonial Text -->
                    {% if block.settings.text != blank %}
                      <blockquote class="testimonial__text">
                        {{ block.settings.text }}
                      </blockquote>
                    {% endif %}

                    <!-- Author Info -->
                    <div class="testimonial__author-section">
                      {% if block.settings.author_avatar != blank %}
                        <div class="testimonial__avatar">
                          <img src="{{ block.settings.author_avatar | image_url: width: 60 }}" alt="{{ block.settings.author }}" loading="lazy">
                        </div>
                      {% else %}
                        <div class="testimonial__avatar testimonial__avatar--placeholder">
                          <span class="testimonial__avatar-icon">üë§</span>
                        </div>
                      {% endif %}

                      <div class="testimonial__author-info">
                        {% if block.settings.author != blank %}
                          <cite class="testimonial__author">{{ block.settings.author }}</cite>
                        {% endif %}
                        {% if block.settings.author_location != blank %}
                          <span class="testimonial__location">üìç {{ block.settings.author_location }}</span>
                        {% endif %}
                        {% if block.settings.purchase_date != blank %}
                          <span class="testimonial__date">Purchased: {{ block.settings.purchase_date }}</span>
                        {% endif %}
                      </div>
                    </div>

                    <!-- Additional Trust Elements -->
                    {% if block.settings.show_helpful_votes %}
                      <div class="testimonial__helpful">
                        <span class="testimonial__helpful-icon">üëç</span>
                        <span class="testimonial__helpful-text">{{ block.settings.helpful_count | default: 47 }} people found this helpful</span>
                      </div>
                    {% endif %}
                  </div>
                </div>
            {% endcase %}
          {% endfor %}
        </div>

        {% if section.blocks.size > 1 %}
          <div class="testimonials__controls">
            <button class="testimonials__control testimonials__control--prev" data-slider-prev aria-label="Previous testimonial">
              <span class="testimonials__control-icon">‚Üê</span>
            </button>
            <button class="testimonials__control testimonials__control--next" data-slider-next aria-label="Next testimonial">
              <span class="testimonials__control-icon">‚Üí</span>
            </button>
          </div>
          
          <div class="testimonials__dots" data-slider-dots>
            {% for block in section.blocks %}
              <button class="testimonials__dot {% if forloop.first %}testimonials__dot--active{% endif %}" data-slide="{{ forloop.index0 }}"></button>
            {% endfor %}
          </div>
        {% endif %}
      </div>

      <!-- Bottom Social Proof -->
      <div class="testimonials__social-proof">
        <div class="testimonials__social-item">
          <span class="testimonials__social-icon">‚≠ê</span>
          <span class="testimonials__social-text">Rated 4.8/5 by 12,000+ customers</span>
        </div>
        <div class="testimonials__social-item">
          <span class="testimonials__social-icon">üõ°Ô∏è</span>
          <span class="testimonials__social-text">100% Authentic Reviews</span>
        </div>
        <div class="testimonials__social-item">
          <span class="testimonials__social-icon">üîÑ</span>
          <span class="testimonials__social-text">30-Day Money Back Guarantee</span>
        </div>
      </div>
    {% else %}
      <div class="testimonials__empty text-center">
        <div class="testimonials__empty-icon">‚ùÑÔ∏è</div>
        <h3 class="testimonials__empty-title">No testimonials yet</h3>
        <p class="testimonials__empty-text">Add customer reviews to build trust and showcase your product quality.</p>
      </div>
    {% endif %}
  </div>
</section>

{% schema %}
{
  "name": "Testimonials",
  "settings": [
    {
      "type": "header",
      "content": "Header Content"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "‚ùÑÔ∏è What Our Customers Say ‚ùÑÔ∏è"
    },
    {
      "type": "textarea",
      "id": "subheading",
      "label": "Subheading",
      "default": "Real experiences from customers who've transformed their kitchens with N√ºHome"
    }
  ],
  "blocks": [
    {
      "type": "testimonial",
      "name": "Testimonial",
      "settings": [
        {
          "type": "header",
          "content": "Review Details"
        },
        {
          "type": "range",
          "id": "rating",
          "min": 1,
          "max": 5,
          "step": 1,
          "default": 5,
          "label": "Rating"
        },
        {
          "type": "textarea",
          "id": "text",
          "label": "Testimonial text",
          "default": "This ice maker has completely transformed my home bar setup! The ice is crystal clear and forms in just 12 minutes. The sleek design fits perfectly on my countertop, and the quality is absolutely outstanding. Worth every penny!"
        },
        {
          "type": "text",
          "id": "product_name",
          "label": "Product Name",
          "default": "EUHOMY Luna Arc Ice Maker"
        },
        {
          "type": "header",
          "content": "Customer Information"
        },
        {
          "type": "text",
          "id": "author",
          "label": "Customer Name",
          "default": "Sarah M."
        },
        {
          "type": "image_picker",
          "id": "author_avatar",
          "label": "Customer Photo (Optional)"
        },
        {
          "type": "text",
          "id": "author_location",
          "label": "Customer Location",
          "default": "New York, NY"
        },
        {
          "type": "text",
          "id": "purchase_date",
          "label": "Purchase Date",
          "default": "December 2023"
        },
        {
          "type": "header",
          "content": "Social Proof"
        },
        {
          "type": "checkbox",
          "id": "show_helpful_votes",
          "label": "Show helpful votes",
          "default": true
        },
        {
          "type": "number",
          "id": "helpful_count",
          "label": "Number of helpful votes",
          "default": 47
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Testimonials",
      "blocks": [
        {
          "type": "testimonial",
          "settings": {
            "rating": 5,
            "text": "This ice maker has completely transformed my home bar setup! The ice is crystal clear and forms in just 12 minutes. The sleek design fits perfectly on my countertop, and the quality is absolutely outstanding. Worth every penny!",
            "author": "Sarah M.",
            "author_location": "New York, NY",
            "product_name": "EUHOMY Luna Arc Ice Maker",
            "purchase_date": "December 2023",
            "helpful_count": 47
          }
        },
        {
          "type": "testimonial",
          "settings": {
            "rating": 5,
            "text": "I've been using this for 3 months now and it's exceeded all my expectations. The ice quality is restaurant-grade and my guests always ask where I get such perfect ice cubes. Highly recommend!",
            "author": "Michael R.",
            "author_location": "Los Angeles, CA",
            "product_name": "EUHOMY Luna Arc Ice Maker",
            "purchase_date": "November 2023",
            "helpful_count": 33
          }
        },
        {
          "type": "testimonial",
          "settings": {
            "rating": 5,
            "text": "Love how quiet and efficient this machine is. Perfect for our small apartment - doesn't take up much space but produces enough ice for all our needs. Customer service was also excellent when I had questions.",
            "author": "Emma L.",
            "author_location": "Chicago, IL",
            "product_name": "EUHOMY Luna Arc Ice Maker",
            "purchase_date": "January 2024",
            "helpful_count": 28
          }
        }
      ]
    }
  ]
}
{% endschema %}

<style>
.testimonials {
  position: relative;
  padding: 100px 0;
  background: linear-gradient(135deg, #F0F8FF 0%, #E6F3FF 30%, #B8E6FF 70%, #87CEEB 100%);
  background-size: 400% 400%;
  animation: frozen-gradient 12s ease-in-out infinite;
  overflow: hidden;
}

/* Background Decorations */
.testimonials__background {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 1;
}

.testimonials__snowflakes {
  position: absolute;
  width: 100%;
  height: 100%;
}

.testimonials__snowflake {
  position: absolute;
  font-size: 20px;
  opacity: 0.2;
  animation: snowfall-slow 20s linear infinite;
}

.testimonials__snowflake:nth-child(1) {
  left: 25%;
  animation-delay: 0s;
  animation-duration: 20s;
}

.testimonials__snowflake:nth-child(2) {
  left: 50%;
  animation-delay: 7s;
  animation-duration: 15s;
}

.testimonials__snowflake:nth-child(3) {
  left: 75%;
  animation-delay: 14s;
  animation-duration: 18s;
}

/* Header */
.testimonials__header {
  position: relative;
  z-index: 2;
  margin-bottom: 80px;
  text-align: center;
}

.testimonials__title {
  font-size: 3.5rem;
  font-weight: 800;
  margin-bottom: 20px;
  line-height: 1.1;
}

.testimonials__title-text {
  background: linear-gradient(135deg, #4A90E2 0%, #2171B5 30%, #87CEEB 70%, #B8E6FF 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  display: inline-block;
  animation: text-shimmer 3s ease-in-out infinite;
}

.testimonials__title-decoration {
  display: block;
  font-size: 1.5rem;
  margin-top: 8px;
  animation: bounce-sparkles 2s ease-in-out infinite;
}

.testimonials__subtitle {
  font-size: 1.25rem;
  color: #4A90E2;
  max-width: 600px;
  margin: 0 auto 40px;
  line-height: 1.6;
  font-weight: 500;
  text-shadow: 0 2px 4px rgba(74, 144, 226, 0.1);
}

/* Trust Indicators */
.testimonials__trust-indicators {
  display: flex;
  justify-content: center;
  gap: 40px;
  margin-bottom: 20px;
  flex-wrap: wrap;
}

.testimonials__trust-indicator {
  text-align: center;
  background: rgba(255, 255, 255, 0.8);
  backdrop-filter: blur(10px);
  padding: 16px 24px;
  border-radius: 16px;
  border: 1px solid rgba(255, 255, 255, 0.3);
  box-shadow: 0 8px 25px rgba(74, 144, 226, 0.15);
  min-width: 120px;
  transition: transform 0.3s ease;
}

.testimonials__trust-indicator:hover {
  transform: translateY(-5px);
}

.testimonials__trust-number {
  font-size: 1.5rem;
  font-weight: 800;
  background: linear-gradient(135deg, #4A90E2 0%, #87CEEB 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  display: block;
  margin-bottom: 4px;
}

.testimonials__trust-label {
  font-size: 12px;
  color: #666;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

/* Testimonials Grid/Slider */
.testimonials__slider {
  position: relative;
  z-index: 2;
  margin-bottom: 50px;
}

.testimonials__grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
  gap: 30px;
  max-width: 1200px;
  margin: 0 auto;
}

/* Individual Testimonials */
.testimonial {
  position: relative;
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(15px);
  border-radius: 24px;
  padding: 32px;
  border: 2px solid rgba(135, 206, 235, 0.2);
  box-shadow: 0 8px 32px rgba(74, 144, 226, 0.15);
  transition: all 0.4s ease;
  overflow: hidden;
}

.testimonial::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
  transition: left 0.6s ease;
  z-index: 1;
}

.testimonial:hover {
  transform: translateY(-8px);
  box-shadow: 0 20px 60px rgba(74, 144, 226, 0.25);
  border-color: rgba(135, 206, 235, 0.4);
}

.testimonial:hover::before {
  left: 100%;
}

/* Verified Badge */
.testimonial__verified-badge {
  position: absolute;
  top: -12px;
  right: 20px;
  background: linear-gradient(135deg, #10B981 0%, #059669 100%);
  color: white;
  padding: 6px 16px;
  border-radius: 20px;
  font-size: 12px;
  font-weight: 700;
  display: flex;
  align-items: center;
  gap: 6px;
  box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3);
  z-index: 3;
}

.testimonial__verified-icon {
  font-size: 14px;
}

/* Testimonial Content */
.testimonial__content {
  position: relative;
  z-index: 2;
}

/* Rating */
.testimonial__rating {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 16px;
  justify-content: center;
}

.star {
  font-size: 18px;
}

.star--filled {
  color: #FFD93D;
  text-shadow: 0 1px 3px rgba(255, 217, 61, 0.3);
}

.star--empty {
  color: #ddd;
}

.testimonial__rating-text {
  font-size: 14px;
  color: #666;
  font-weight: 600;
  margin-left: 8px;
}

/* Product Context */
.testimonial__product {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  margin-bottom: 16px;
  background: rgba(74, 144, 226, 0.1);
  padding: 8px 16px;
  border-radius: 16px;
  border: 1px solid rgba(74, 144, 226, 0.2);
}

.testimonial__product-icon {
  font-size: 16px;
}

.testimonial__product-name {
  font-size: 14px;
  font-weight: 600;
  color: #4A90E2;
}

/* Testimonial Text */
.testimonial__text {
  font-size: 16px;
  color: #333;
  line-height: 1.6;
  margin-bottom: 24px;
  text-align: center;
  font-style: italic;
  position: relative;
}

.testimonial__text::before {
  content: '"';
  position: absolute;
  top: -10px;
  left: -10px;
  font-size: 48px;
  color: #4A90E2;
  opacity: 0.3;
  font-family: serif;
  line-height: 1;
}

.testimonial__text::after {
  content: '"';
  position: absolute;
  bottom: -30px;
  right: -10px;
  font-size: 48px;
  color: #4A90E2;
  opacity: 0.3;
  font-family: serif;
  line-height: 1;
}

/* Author Section */
.testimonial__author-section {
  display: flex;
  align-items: center;
  gap: 16px;
  margin-bottom: 16px;
}

.testimonial__avatar {
  width: 50px;
  height: 50px;
  border-radius: 50%;
  overflow: hidden;
  border: 3px solid rgba(74, 144, 226, 0.2);
  flex-shrink: 0;
}

.testimonial__avatar img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.testimonial__avatar--placeholder {
  background: linear-gradient(135deg, #4A90E2 0%, #87CEEB 100%);
  display: flex;
  align-items: center;
  justify-content: center;
}

.testimonial__avatar-icon {
  font-size: 24px;
  color: white;
}

.testimonial__author-info {
  text-align: left;
  flex: 1;
}

.testimonial__author {
  display: block;
  font-size: 16px;
  font-weight: 700;
  color: #222;
  margin-bottom: 4px;
  font-style: normal;
}

.testimonial__location {
  display: block;
  font-size: 12px;
  color: #666;
  margin-bottom: 2px;
}

.testimonial__date {
  display: block;
  font-size: 12px;
  color: #4A90E2;
  font-weight: 500;
}

/* Helpful Votes */
.testimonial__helpful {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 8px 16px;
  background: rgba(74, 144, 226, 0.05);
  border-radius: 16px;
  border: 1px solid rgba(74, 144, 226, 0.1);
}

.testimonial__helpful-icon {
  font-size: 16px;
  color: #4A90E2;
}

.testimonial__helpful-text {
  font-size: 12px;
  color: #666;
  font-weight: 500;
}

/* Controls */
.testimonials__controls {
  display: flex;
  justify-content: center;
  gap: 16px;
  margin: 40px 0 20px;
}

.testimonials__control {
  width: 50px;
  height: 50px;
  background: rgba(255, 255, 255, 0.9);
  backdrop-filter: blur(10px);
  border: 2px solid rgba(74, 144, 226, 0.2);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.3s ease;
  color: #4A90E2;
  box-shadow: 0 4px 15px rgba(74, 144, 226, 0.1);
}

.testimonials__control:hover {
  background: #4A90E2;
  color: white;
  transform: scale(1.1);
  box-shadow: 0 8px 25px rgba(74, 144, 226, 0.3);
}

.testimonials__control-icon {
  font-size: 20px;
  font-weight: bold;
}

/* Dots */
.testimonials__dots {
  display: flex;
  justify-content: center;
  gap: 12px;
  margin-bottom: 40px;
}

.testimonials__dot {
  width: 12px;
  height: 12px;
  border-radius: 50%;
  background: rgba(74, 144, 226, 0.3);
  border: none;
  cursor: pointer;
  transition: all 0.3s ease;
}

.testimonials__dot--active,
.testimonials__dot:hover {
  background: #4A90E2;
  transform: scale(1.2);
}

/* Social Proof */
.testimonials__social-proof {
  position: relative;
  z-index: 2;
  display: flex;
  justify-content: center;
  gap: 32px;
  flex-wrap: wrap;
}

.testimonials__social-item {
  display: flex;
  align-items: center;
  gap: 8px;
  background: rgba(255, 255, 255, 0.9);
  backdrop-filter: blur(10px);
  padding: 12px 20px;
  border-radius: 20px;
  border: 1px solid rgba(255, 255, 255, 0.3);
  box-shadow: 0 4px 15px rgba(74, 144, 226, 0.1);
  transition: transform 0.3s ease;
  min-width: 200px;
  justify-content: center;
}

.testimonials__social-item:hover {
  transform: translateY(-3px);
}

.testimonials__social-icon {
  font-size: 18px;
}

.testimonials__social-text {
  font-size: 14px;
  font-weight: 600;
  color: #222;
}

/* Empty State */
.testimonials__empty {
  text-align: center;
  padding: 60px 20px;
  background: rgba(255, 255, 255, 0.8);
  backdrop-filter: blur(10px);
  border-radius: 20px;
  border: 1px solid rgba(255, 255, 255, 0.3);
  box-shadow: 0 8px 25px rgba(74, 144, 226, 0.15);
  max-width: 500px;
  margin: 0 auto;
  position: relative;
  z-index: 2;
}

.testimonials__empty-icon {
  font-size: 48px;
  margin-bottom: 16px;
  animation: float-sparkles 3s ease-in-out infinite;
}

.testimonials__empty-title {
  font-size: 1.5rem;
  font-weight: 700;
  color: #222;
  margin-bottom: 8px;
}

.testimonials__empty-text {
  color: #666;
  font-size: 16px;
  line-height: 1.5;
}

/* Animations */
@keyframes frozen-gradient {
  0%, 100% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
}

@keyframes snowfall-slow {
  0% {
    transform: translateY(-100vh) rotate(0deg);
    opacity: 0.2;
  }
  10% {
    opacity: 0.4;
  }
  90% {
    opacity: 0.2;
  }
  100% {
    transform: translateY(100vh) rotate(360deg);
    opacity: 0;
  }
}

@keyframes text-shimmer {
  0%, 100% { filter: brightness(1); }
  50% { filter: brightness(1.2); }
}

@keyframes bounce-sparkles {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.1); }
}

@keyframes float-sparkles {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-10px); }
}

/* Responsive Design */
@media (max-width: 1024px) {
  .testimonials__grid {
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 24px;
  }
  
  .testimonials__trust-indicators {
    gap: 24px;
  }
  
  .testimonials__social-proof {
    gap: 20px;
  }
}

@media (max-width: 768px) {
  .testimonials {
    padding: 60px 0;
  }
  
  .testimonials__header {
    margin-bottom: 50px;
  }
  
  .testimonials__title {
    font-size: 2.5rem;
  }
  
  .testimonials__title-decoration {
    font-size: 1.25rem;
  }
  
  .testimonials__subtitle {
    font-size: 1.125rem;
  }
  
  .testimonials__grid {
    grid-template-columns: 1fr;
    gap: 20px;
  }
  
  .testimonial {
    padding: 24px;
  }
  
  .testimonials__trust-indicators {
    flex-direction: column;
    align-items: center;
    gap: 16px;
  }
  
  .testimonials__social-proof {
    flex-direction: column;
    align-items: center;
    gap: 16px;
  }
  
  .testimonials__social-item {
    width: 100%;
    max-width: 300px;
  }
}

@media (max-width: 480px) {
  .testimonials {
    padding: 40px 0;
  }
  
  .testimonials__title {
    font-size: 2rem;
  }
  
  .testimonials__title-decoration {
    font-size: 1rem;
  }
  
  .testimonials__subtitle {
    font-size: 1rem;
  }
  
  .testimonial {
    padding: 20px;
  }
  
  .testimonial__text {
    font-size: 15px;
  }
  
  .testimonials__snowflakes {
    display: none; /* Hide snowflakes on very small screens for performance */
  }
}
</style>

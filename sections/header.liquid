{% comment %}
  Custom Header section for N√ºHome theme
  Features: Announcement bar, support box, logo, navigation, search, account, cart
  Combines COWSAR structure with N√ºHome modern aesthetic
{% endcomment %}

<!-- Top Announcement Bar -->
<div class="announcement-bar">
  <div class="container">
    <div class="announcement-bar__content">
      <span class="announcement-bar__icon">üì¶</span>
      <span class="announcement-bar__text">Shipping from US Inventory ‚Äî Delivery in 2‚Äì5 Days</span>
      <span class="announcement-bar__icon">üöö</span>
    </div>
  </div>
</div>

<!-- Main Header -->
<header class="header" data-section-id="{{ section.id }}" data-section-type="header">
  <div class="container">
    <div class="header__content">
      <!-- Left: Support Box -->
      <div class="header__support">
        <div class="support-box">
          <div class="support-box__icon">üéß</div>
          <div class="support-box__content">
            <div class="support-box__label">Customer Support</div>
            <div class="support-box__phone">+1-888-555-1212</div>
          </div>
        </div>
      </div>

      <!-- Center: Logo -->
      <div class="header__logo">
        {% if section.settings.logo != blank %}
          <a href="/" class="header__logo-link">
            <img 
              src="{{ section.settings.logo | image_url: width: section.settings.logo_width }}"
              alt="{{ shop.name }}"
              width="{{ section.settings.logo_width }}"
              height="{{ section.settings.logo_width | divided_by: section.settings.logo.aspect_ratio | round }}"
              loading="eager">
          </a>
        {% else %}
          <a href="/" class="header__logo-text">
            N√ºHome
          </a>
        {% endif %}
      </div>

      <!-- Right: Header Actions -->
      <div class="header__actions">
        <!-- Search -->
        <button 
          class="header__action-btn" 
          data-search-toggle
          aria-label="Toggle search"
          aria-expanded="false">
          <span class="header__action-icon">üîç</span>
        </button>

        <!-- Account -->
        <a href="/account" class="header__action-btn" aria-label="Account">
          <span class="header__action-icon">üë§</span>
        </a>

        <!-- Cart -->
        <a href="/cart" class="header__action-btn header__cart-btn" aria-label="Cart">
          <span class="header__action-icon">üõí</span>
          <span class="header__cart-count" data-cart-count>{{ cart.item_count }}</span>
        </a>
      </div>

      <!-- Mobile Menu Toggle -->
      <button 
        class="header__mobile-toggle" 
        data-mobile-menu-toggle
        aria-label="Toggle mobile menu"
        aria-expanded="false">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>

    <!-- Navigation Menu -->
    <nav class="header__nav" role="navigation">
      {% if section.settings.menu != blank %}
        <ul class="header__nav-list">
          {% for link in linklists[section.settings.menu].links %}
            <li class="header__nav-item">
              <a href="{{ link.url }}" class="header__nav-link">
                {{ link.title }}
              </a>
              {% if link.links != blank %}
                <ul class="header__nav-dropdown">
                  {% for child_link in link.links %}
                    <li>
                      <a href="{{ child_link.url }}" class="header__nav-dropdown-link">
                        {{ child_link.title }}
                      </a>
                    </li>
                  {% endfor %}
                </ul>
              {% endif %}
            </li>
          {% endfor %}
        </ul>
      {% else %}
        <!-- Default Navigation -->
        <ul class="header__nav-list">
          <li class="header__nav-item">
            <a href="/" class="header__nav-link">Home</a>
          </li>
          <li class="header__nav-item">
            <a href="/collections/bestsellers" class="header__nav-link">Best Sellers</a>
          </li>
          <li class="header__nav-item">
            <a href="/collections/ice-makers" class="header__nav-link">Ice Makers</a>
          </li>
          <li class="header__nav-item">
            <a href="/collections/coffee-machines" class="header__nav-link">Coffee Machines</a>
          </li>
          <li class="header__nav-item">
            <a href="/collections/wellness-tech" class="header__nav-link">Wellness Tech</a>
          </li>
          <li class="header__nav-item">
            <a href="/pages/contact" class="header__nav-link">Contact</a>
          </li>
        </ul>
      {% endif %}
    </nav>

    <!-- Search Form -->
    <div class="header__search" data-search-form>
      <form action="/search" method="get" class="header__search-form">
        <input 
          type="search" 
          name="q" 
          placeholder="Search products..."
          class="header__search-input"
          aria-label="Search">
        <button type="submit" class="header__search-btn" aria-label="Search">
          <span class="header__action-icon">üîç</span>
        </button>
      </form>
    </div>
  </div>

  <!-- Mobile Menu -->
  <div class="header__mobile-menu" data-mobile-menu>
    <div class="header__mobile-menu-content">
      <nav class="header__mobile-nav">
        <ul class="header__mobile-nav-list">
          <li class="header__mobile-nav-item">
            <a href="/" class="header__mobile-nav-link">Home</a>
          </li>
          <li class="header__mobile-nav-item">
            <a href="/collections/bestsellers" class="header__mobile-nav-link">Best Sellers</a>
          </li>
          <li class="header__mobile-nav-item">
            <a href="/collections/ice-makers" class="header__mobile-nav-link">Ice Makers</a>
          </li>
          <li class="header__mobile-nav-item">
            <a href="/collections/coffee-machines" class="header__mobile-nav-link">Coffee Machines</a>
          </li>
          <li class="header__mobile-nav-item">
            <a href="/collections/wellness-tech" class="header__mobile-nav-link">Wellness Tech</a>
          </li>
          <li class="header__mobile-nav-item">
            <a href="/pages/contact" class="header__mobile-nav-link">Contact</a>
          </li>
        </ul>
      </nav>
    </div>
  </div>
</header>

{% schema %}
{
  "name": "Header",
  "settings": [
    {
      "type": "image_picker",
      "id": "logo",
      "label": "Logo"
    },
    {
      "type": "range",
      "id": "logo_width",
      "min": 50,
      "max": 300,
      "step": 10,
      "default": 180,
      "unit": "px",
      "label": "Logo width"
    },
    {
      "type": "link_list",
      "id": "menu",
      "label": "Menu",
      "default": "main-menu"
    },
    {
      "type": "text",
      "id": "support_phone",
      "label": "Support Phone Number",
      "default": "+1-888-555-1212"
    },
    {
      "type": "text",
      "id": "announcement_text",
      "label": "Announcement Text",
      "default": "Shipping from US Inventory ‚Äî Delivery in 2‚Äì5 Days"
    }
  ]
}
{% endschema %}

<style>
/* Announcement Bar */
.announcement-bar {
  background: #eef6f9;
  padding: 8px 0;
  border-bottom: 1px solid rgba(110, 193, 182, 0.1);
}

.announcement-bar__content {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12px;
  font-size: 14px;
  font-weight: 600;
  color: #222;
}

.announcement-bar__icon {
  font-size: 16px;
}

.announcement-bar__text {
  text-align: center;
}

/* Main Header */
.header {
  background: white;
  border-bottom: 1px solid #f4f4f4;
  position: relative;
  z-index: var(--z-sticky);
}

.header__content {
  display: grid;
  grid-template-columns: 1fr auto 1fr;
  align-items: center;
  gap: 24px;
  padding: 20px 0;
}

/* Support Box */
.header__support {
  justify-self: start;
}

.support-box {
  display: flex;
  align-items: center;
  gap: 12px;
  background: #f4f8f9;
  padding: 12px 16px;
  border-radius: 12px;
  border: 1px solid rgba(110, 193, 182, 0.1);
}

.support-box__icon {
  font-size: 20px;
}

.support-box__content {
  display: flex;
  flex-direction: column;
}

.support-box__label {
  font-size: 12px;
  font-weight: 600;
  color: #666;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.support-box__phone {
  font-size: 14px;
  font-weight: 700;
  color: #222;
}

/* Logo */
.header__logo {
  justify-self: center;
}

.header__logo-text {
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  font-size: 32px;
  font-weight: 700;
  color: #6ec1b6;
  text-decoration: none;
  letter-spacing: -0.5px;
}

/* Header Actions */
.header__actions {
  display: flex;
  align-items: center;
  gap: 16px;
  justify-self: end;
}

.header__action-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 44px;
  height: 44px;
  border: none;
  background: transparent;
  color: #222;
  cursor: pointer;
  transition: all 0.2s ease;
  border-radius: 12px;
  position: relative;
}

.header__action-btn:hover {
  background: #f4f8f9;
  color: #6ec1b6;
}

.header__action-icon {
  font-size: 20px;
}

.header__cart-count {
  position: absolute;
  top: -6px;
  right: -6px;
  background: #6ec1b6;
  color: white;
  font-size: 12px;
  font-weight: 700;
  width: 20px;
  height: 20px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Navigation */
.header__nav {
  border-top: 1px solid #f4f4f4;
  padding: 16px 0;
}

.header__nav-list {
  display: flex;
  list-style: none;
  gap: 32px;
  justify-content: center;
  margin: 0;
  padding: 0;
}

.header__nav-link {
  color: #222;
  text-decoration: none;
  font-weight: 500;
  font-size: 16px;
  transition: color 0.2s ease;
  padding: 8px 0;
  position: relative;
}

.header__nav-link:hover {
  color: #6ec1b6;
}

.header__nav-link::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 0;
  width: 0;
  height: 2px;
  background: #6ec1b6;
  transition: width 0.2s ease;
}

.header__nav-link:hover::after {
  width: 100%;
}

/* Search Form */
.header__search {
  display: none;
  padding: 16px 0;
  border-top: 1px solid #f4f4f4;
}

.header__search.active {
  display: block;
}

.header__search-form {
  display: flex;
  gap: 12px;
  max-width: 400px;
  margin: 0 auto;
}

.header__search-input {
  flex: 1;
  padding: 12px 16px;
  border: 2px solid #f4f4f4;
  border-radius: 12px;
  font-size: 16px;
  transition: border-color 0.2s ease;
}

.header__search-input:focus {
  outline: none;
  border-color: #6ec1b6;
}

.header__search-btn {
  padding: 12px 16px;
  background: #6ec1b6;
  color: white;
  border: none;
  border-radius: 12px;
  cursor: pointer;
  transition: background-color 0.2s ease;
}

.header__search-btn:hover {
  background: #5db3a8;
}

/* Mobile Menu Toggle */
.header__mobile-toggle {
  display: none;
  flex-direction: column;
  gap: 4px;
  background: transparent;
  border: none;
  cursor: pointer;
  padding: 8px;
}

.header__mobile-toggle span {
  width: 24px;
  height: 2px;
  background: #222;
  transition: all 0.2s ease;
}

/* Mobile Menu */
.header__mobile-menu {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100vh;
  background: white;
  z-index: var(--z-modal);
  transform: translateX(-100%);
  transition: transform 0.3s ease;
  overflow-y: auto;
}

.header__mobile-menu.active {
  transform: translateX(0);
}

.header__mobile-menu-content {
  padding: 80px 24px 24px;
}

.header__mobile-nav-list {
  list-style: none;
  display: flex;
  flex-direction: column;
  gap: 24px;
}

.header__mobile-nav-link {
  color: #222;
  text-decoration: none;
  font-size: 20px;
  font-weight: 500;
  display: block;
  padding: 16px 0;
  border-bottom: 1px solid #f4f4f4;
}

/* Responsive Design */
@media (max-width: 1024px) {
  .header__nav-list {
    gap: 24px;
  }
}

@media (max-width: 768px) {
  .header__content {
    grid-template-columns: auto 1fr auto;
    gap: 16px;
    padding: 16px 0;
  }
  
  .header__support {
    display: none;
  }
  
  .header__logo {
    justify-self: start;
  }
  
  .header__logo-text {
    font-size: 28px;
  }
  
  .header__actions {
    gap: 12px;
  }
  
  .header__action-btn {
    width: 40px;
    height: 40px;
  }
  
  .header__mobile-toggle {
    display: flex;
  }
  
  .header__nav {
    display: none;
  }
  
  .announcement-bar__content {
    flex-direction: column;
    gap: 8px;
    text-align: center;
  }
  
  .announcement-bar__text {
    font-size: 13px;
  }
}

@media (max-width: 480px) {
  .header__logo-text {
    font-size: 24px;
  }
  
  .header__actions {
    gap: 8px;
  }
  
  .header__action-btn {
    width: 36px;
    height: 36px;
  }
  
  .header__action-icon {
    font-size: 18px;
  }
}
</style>
